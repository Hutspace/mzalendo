{% extends 'base.html' %}

{% block title %}Help: API{% endblock %}

{% block content %}

<h1>Available APIs for this site</h1>

<p>This site offers a number of ways of accessing its data programmatically:</p>

<h2>RESTful API</h2>

<p>Every night, data from this site is mirrored to an instance
of <a href="http://popit.poplus.org/">PopIt</a>. PopIt provides
an HTTP API for querying data about people, organizations and
their memberships that link those (e.g. that someone is a member
of a particular political party.</p>

<p>The endpoint of this API is:
<a href="{{ popit_api_url }}">{{ popit_api_url }}</a> and you can
find a more easily browseable
view of this data at
<a href="{{ popit_url }}">{{ popit_url }}</a>. There is
also <a href="http://popit.poplus.org/docs/api/">documentation
for PopIt's API here</a>.
</p>

<h2>Daily JSON Data Dumps</h2>

<p>If you prefer to work with an export of the site's core data
in JSON format, you can use one of the nightly data dumps that
we automatically generate.  All of data in files below are
different ways of presenting the JSON serialization of
the <a href="http://popoloproject.com/">Popolo data model</a>.
The following sections should explain which one of these would
be most suitable for you:
</p>

<h3>JSON suitable for Pombola's core_import_popolo</h3>

<p>If you want to import the site's data into an instance
of <a href="https://www.mysociety.org/projects/parliamentarymonitoring/pombola/">Pombola</a>,
the software that this site runs on, then you should use the
following data source with its <tt>core_import_popolo</tt>
management command. (This data is a single JSON object with
'persons' and 'organizations' keys at the top level, and
membership information being included in each person object:</p>

<ul>
<li><a href="{{ dump_base_path }}pombola.json">JSON data suitable for creating a Pombola instance</a></li>
</ul>

<h3>JSON suitable for mongoimport</h3>

<p>For large data imports, mongodb's mongoimport command should
be provided with newline separated JSON objects.  You can
download the data in this format from these links:</p>

<ul>
<li><a href="{{ dump_base_path }}mongo-persons.json">Person data suitable for mongoimport</a></li>
<li><a href="{{ dump_base_path }}mongo-organizations.json">Organization data suitable for mongoimport</a></li>
<li><a href="{{ dump_base_path }}mongo-memberships.json">Membership data suitable for mongoimport</a></li>
</ul>

<h3>Person, Organization and Membership data as JSON arrays</h3>

<p>This data was intended for use with mongoimport's --jsonArray
option, although depending on your version of the software, the
files may be too large to be imported by that method.</p>

<ul>
<li><a href="{{ dump_base_path }}persons.json">Person data in a JSON array</a></li>
<li><a href="{{ dump_base_path }}organizations.json">Organization data in a JSON array</a></li>
<li><a href="{{ dump_base_path }}memberships.json">Membership data in a JSON array</a></li>
</ul>

{% endblock %}
